(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const S of i.addedNodes)S.tagName==="LINK"&&S.rel==="modulepreload"&&r(S)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();const q={easy:{gameTime:30,initialSpeed:1e3,fastSpeed:800,speedChangeTime:15,pointsPerHit:1,timeBonus:!1},medium:{gameTime:45,initialSpeed:700,fastSpeed:500,speedChangeTime:25,pointsPerHit:2,timeBonus:!0},hard:{gameTime:60,initialSpeed:500,fastSpeed:300,speedChangeTime:40,pointsPerHit:3,timeBonus:!0}};let w=-1;function K(t,e="easy",n=0){const r=q[e];let o=r.pointsPerHit;return r.timeBonus&&n<10&&(o+=1),t+o}function X(t,e=!0){let n;if(e&&w!==-1)do n=Math.floor(Math.random()*t);while(n===w);else n=Math.floor(Math.random()*t);return w=n,n}function N(){w=-1}function G(t="easy"){return q[t].gameTime}function Q(t,e="easy"){const n=q[e];return t>=n.speedChangeTime?n.initialSpeed:n.fastSpeed}function W(t,e="easy"){return t===q[e].speedChangeTime}class Y{constructor(){this.sounds={},this.isMuted=this.loadMutedState(),this.volume=this.loadVolume()}loadSound(e,n){const r=new Audio(n);return r.volume=this.volume,this.sounds[e]=r,r}playSound(e){if(this.isMuted||!this.sounds[e])return;const n=this.sounds[e];n.currentTime=0,n.volume=this.volume,n.play().catch(r=>{console.log("Audio play prevented:",r)})}toggleMute(){return this.isMuted=!this.isMuted,this.saveMutedState(),this.isMuted}setVolume(e){return this.volume=Math.max(0,Math.min(1,e)),Object.values(this.sounds).forEach(n=>{n.volume=this.volume}),this.saveVolume(),this.volume}getVolume(){return this.volume}getMuted(){return this.isMuted}saveMutedState(){localStorage.setItem("whackAMole_audioMuted",JSON.stringify(this.isMuted))}loadMutedState(){const e=localStorage.getItem("whackAMole_audioMuted");return e?JSON.parse(e):!1}saveVolume(){localStorage.setItem("whackAMole_volume",this.volume.toString())}loadVolume(){const e=localStorage.getItem("whackAMole_volume");return e?parseFloat(e):.5}}let A=null;function Z(){return A||(A=new Y),A}function R(t){const e=document.getElementById("volume-slider"),n=document.getElementById("volume-value");e&&(e.value=t),n&&(n.textContent=Math.round(t*100)+"%")}function _(t){const e=document.getElementById("mute-button");e&&(e.textContent=t?"ðŸ”‡ Unmute":"ðŸ”Š Mute",e.setAttribute("aria-label",t?"Unmute sound":"Mute sound"))}const M=Z();let s,L,C,b,B,y,a,f,T,c,h,H,P,D,O;function ee(){s=document.querySelectorAll(".square"),L=document.querySelector("#time-left"),C=document.querySelector("#score"),b=document.querySelector("#high-score"),B=document.querySelector("#final-score"),y=document.querySelector("#start-button"),a=document.querySelector("#pause-button"),f=document.querySelector("#restart-button"),T=document.querySelector("#reset-highscore-button"),c=document.querySelector("#high-score-message"),h=document.querySelectorAll(".difficulty-btn"),H=document.querySelector("#current-difficulty"),P=document.querySelector("#sr-announcer"),D=document.querySelector("#volume-slider"),document.querySelector("#volume-value"),O=document.querySelector("#mute-button")}let g=0,$=new Set,d=30,p=null,E=null,I=!1,v=!1,u="easy",l=null;function te(t){console.log(t)}function ne(){M.loadSound("hit","audio/whack01.mp3"),R(M.getVolume()),_(M.getMuted())}function z(){return parseInt(localStorage.getItem(`whackAMoleHighScore_${u}`))||0}function F(t){localStorage.setItem(`whackAMoleHighScore_${u}`,t),b&&(b.textContent=t)}function U(){try{if(b){const t=z(u);b.textContent=t}}catch(t){console.error("Error updating high score:",t)}}function oe(){try{const t=z();g>t&&(F(g),c&&(c.textContent="ðŸŽ‰ New High Score! ðŸŽ‰",c.style.display="block",setTimeout(()=>c.style.display="none",3e3)))}catch(t){console.error("Error checking high score:",t)}}function re(){confirm(`Reset ${u.toUpperCase()} High Score?`)&&(F(0),c&&(c.textContent="High Score Reset!",c.style.display="block",setTimeout(()=>c.style.display="none",2e3)))}function J(){L&&(L.textContent=d)}function x(t=!1){p&&clearInterval(p),E&&clearInterval(E),g=0,C&&(C.textContent=g),B&&(B.textContent=""),s&&s.forEach(r=>r.classList.remove("mole","whacked","selected")),$.clear(),N(),I=!1,v=!1,y&&(y.disabled=!1),a&&(a.disabled=!0,a.textContent="Pause"),f&&(f.disabled=!0),t||(d=G(u)),J(),U(),scores={1:0,2:0};const e=document.getElementById("score-player1"),n=document.getElementById("score-player2");e&&(e.textContent=0),n&&(n.textContent=0)}function ie(){v||(x(!0),v=!0,y&&(y.disabled=!0),a&&(a.disabled=!1),f&&(f.disabled=!1),V(),E=setInterval(j,1e3))}function se(){v&&(I?(V(),E=setInterval(j,1e3),a&&(a.textContent="Pause"),I=!1):(clearInterval(p),clearInterval(E),a&&(a.textContent="Resume"),I=!0))}function le(){s.forEach(t=>t.classList.remove("mole","whacked")),s.forEach(t=>t.classList.remove("selected")),$.clear(),l=null;try{s.forEach(n=>n.classList.remove("selected")),hit=null,l=null;const t=X(9,!0),e=s[t];e.classList.add("mole"),hit=e.id}catch(t){te(`Error in randomSquare: ${t.message}`)}}function k(t){if(!v||I)return;const e=s[t];e&&e.id==hit&&(g=K(g,u,d),C&&(C.textContent=g),hit=null,M.playSound("hit"))}function ae(){s.forEach((t,e)=>{t.addEventListener("mousedown",()=>{k(e),m(e)}),t.addEventListener("click",()=>{k(e),m(e)})})}function m(t){l!==null&&s[l]&&s[l].classList.remove("selected"),l=t,s[l]&&(s[l].classList.add("selected"),s[l].focus({preventScroll:!0}),P&&(P.textContent=`Selected Hole ${l+1}`))}function V(){p&&clearInterval(p);const t=Q(d,u);p=setInterval(le,t)}function j(){d--,L&&(L.textContent=d),W(d,u)&&V(),d==0&&(clearInterval(E),clearInterval(p),v=!1,a&&(a.disabled=!0),f&&(f.disabled=!1),s&&s.forEach(t=>t.classList.remove("mole")),oe())}function ue(){D&&D.addEventListener("input",t=>{const e=parseFloat(t.target.value);M.setVolume(e),R(e)}),O&&O.addEventListener("click",()=>{const t=M.toggleMute();_(t)})}function ce(){h&&h.forEach(e=>{e.addEventListener("click",()=>{v||(h.forEach(n=>n.classList.remove("active")),e.classList.add("active"),u=e.dataset.level,H&&(H.textContent=u.charAt(0).toUpperCase()+u.slice(1)),x(),U())})}),document.addEventListener("keydown",e=>{const n=document.activeElement.tagName;if(n==="INPUT"||n==="TEXTAREA")return;if(/^[1-9]$/.test(e.key)){const S=parseInt(e.key,10)-1;m(S),k(S),e.preventDefault();return}const r=3;l===null&&m(4);let o=Math.floor(l/r),i=l%r;switch(e.key){case"ArrowLeft":i=Math.max(0,i-1),m(o*r+i),e.preventDefault();break;case"ArrowRight":i=Math.min(r-1,i+1),m(o*r+i),e.preventDefault();break;case"ArrowUp":o=Math.max(0,o-1),m(o*r+i),e.preventDefault();break;case"ArrowDown":o=Math.min(2,o+1),m(o*r+i),e.preventDefault();break;case"Enter":case" ":k(l),e.preventDefault();break}}),y&&y.addEventListener("click",ie),a&&a.addEventListener("click",se),f&&f.addEventListener("click",x),T&&T.addEventListener("click",re);const t=document.getElementById("multiplayer-toggle");t&&t.addEventListener("click",()=>{multiplayer=!multiplayer,scores={1:0,2:0},document.getElementById("score-player1").textContent=0,document.getElementById("score-player2").textContent=0,alert(multiplayer?"ðŸŽ® Multiplayer Mode On":"ðŸŽ¯ Single Player Mode")})}function de(){if(ee(),ne(),ue(),N(),d=G(u),J(),x(),U(),ce(),ae(),h&&h.length>0){h.forEach(e=>e.classList.remove("active"));const t=document.querySelector('.difficulty-btn[data-level="easy"]');t&&t.classList.add("active")}}document.addEventListener("DOMContentLoaded",()=>{de()});
