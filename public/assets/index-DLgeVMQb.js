(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const x of s.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&a(x)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();const M={easy:{gameTime:30,initialSpeed:1e3,fastSpeed:800,speedChangeTime:15,pointsPerHit:1,timeBonus:!1},medium:{gameTime:45,initialSpeed:700,fastSpeed:500,speedChangeTime:25,pointsPerHit:2,timeBonus:!0},hard:{gameTime:60,initialSpeed:500,fastSpeed:300,speedChangeTime:40,pointsPerHit:3,timeBonus:!0}};let b=-1;function X(e,r="easy",n=0){const a=M[r];let i=a.pointsPerHit;return a.timeBonus&&n<10&&(i+=1),e+i}function Y(e,r=!0){let n;if(r&&b!==-1)do n=Math.floor(Math.random()*e);while(n===b);else n=Math.floor(Math.random()*e);return b=n,n}function U(){b=-1}function j(e="easy"){return M[e].gameTime}function J(e,r="easy"){const n=M[r];return e>=n.speedChangeTime?n.initialSpeed:n.fastSpeed}function Q(e,r="easy"){return e===M[r].speedChangeTime}let o,C,L,q,H,h,c,g,G,m,T,A,D;function W(){o=document.querySelectorAll(".square"),document.querySelector(".mole"),C=document.querySelector("#time-left"),L=document.querySelector("#score"),q=document.querySelector("#high-score"),H=document.querySelector("#final-score"),h=document.querySelector("#start-button"),c=document.querySelector("#pause-button"),g=document.querySelector("#restart-button"),G=document.querySelector("#reset-highscore-button"),m=document.querySelector("#high-score-message"),T=document.querySelectorAll(".difficulty-btn"),A=document.querySelector("#current-difficulty"),D=document.querySelector("#sr-announcer")}let I,d=0,k=0,f=30,y=null,v=null,w=!1,S=!1,u="easy",l=null;function t(e){console.log(e)}function Z(){I=new Audio("audio/whack01.mp3")}function z(){return parseInt(localStorage.getItem(`whackAMoleHighScore_${u}`))||0}function K(e){localStorage.setItem(`whackAMoleHighScore_${u}`,e),q&&(q.textContent=e)}function N(){t("updateHighScoreDisplay called");try{if(q){const e=z(u);q.textContent=e,t(`High score displayed: ${e}`)}else t("Error: highScore element not found")}catch(e){t(`Error in updateHighScoreDisplay: ${e.message}`)}}function V(){t("checkHighScore called");try{const e=z();d>e?(t(`New High Score! Old: ${e}, New: ${d}`),K(d),m&&(m.textContent="ðŸŽ‰ New High Score! ðŸŽ‰",m.style.display="block",setTimeout(()=>m.style.display="none",3e3))):t(`No new high score. Current score: ${d}, High Score: ${e}`)}catch(e){t(`Error in checkHighScore: ${e.message}`)}}function ee(){t("resetHighScore called");try{confirm(`Reset ${u.toUpperCase()} High Score?`)&&(t(`Resetting high score for ${u}`),K(0),m&&(m.textContent="High Score Reset!",m.style.display="block",setTimeout(()=>m.style.display="none",2e3)))}catch(e){t(`Error in resetHighScore: ${e.message}`)}}function te(){C&&(C.textContent=f)}function $(e=!1){t("resetGame called");try{y&&clearInterval(y),v&&clearInterval(v),d=0,L&&(L.textContent=d),H&&(H.textContent=""),o&&o.forEach(r=>r.classList.remove("mole")),U(),w=!1,S=!1,h&&(h.disabled=!1),c&&(c.disabled=!0,c.textContent="Pause"),g&&(g.disabled=!0),e||(f=j(u),t(`getInitialTime in resetGame returned: ${f}`)),te(),N(),t(`Game reset. Difficulty: ${u}, time: ${f}`)}catch(r){t(`Error in resetGame: ${r.message}`)}}function re(){t("startGame called");try{if(S){t("Game already running, ignoring startGame");return}$(!0),S=!0,h&&(h.disabled=!0),c&&(c.disabled=!1),g&&(g.disabled=!1),t("Starting moveMole"),O(),t("Starting countDown timer"),v=setInterval(_,1e3),t("Game started successfully")}catch(e){t(`Error in startGame: ${e.message}`)}}function ne(){t("pauseGame called");try{if(!S){t("Game not running, ignoring pauseGame");return}w?(O(),v=setInterval(_,1e3),c&&(c.textContent="Pause"),w=!1,t("Game resumed")):(clearInterval(y),clearInterval(v),c&&(c.textContent="Resume"),w=!0,t("Game paused"))}catch(e){t(`Error in pauseGame: ${e.message}`)}}function ie(){t("randomSquare called");try{if(!o){t("Error: squares not initialized");return}o.forEach(n=>{n.classList.remove("mole")}),o.forEach(n=>n.classList.remove("selected")),k=null,l=null;const e=Y(9,!0),r=o[e];r.classList.add("mole"),k=r.id}catch(e){t(`Error in randomSquare: ${e.message}`)}}function P(e){if(!S||w)return;const r=o[e];r&&r.id==k&&(d=X(d,u,f),L&&(L.textContent=d),k=null,I&&(I.currentTime=0,I.play().catch(n=>{console.log("Audio play prevented:",n)})))}function oe(){o&&o.forEach((e,r)=>{e.addEventListener("mousedown",()=>{P(r),p(r)})})}function p(e){l!==null&&o[l]&&o[l].classList.remove("selected"),l=e,o[l]&&(o[l].classList.add("selected"),o[l].focus({preventScroll:!0}),D&&(D.textContent=`Selected Hole ${l+1}`))}function O(){t("moveMole called");try{y&&clearInterval(y);const e=J(f,u);t(`Setting mole timer with speed: ${e}`),y=setInterval(ie,e)}catch(e){t(`Error in moveMole: ${e.message}`)}}function _(){if(f--,C&&(C.textContent=f),Q(f,u)&&O(),f==0){clearInterval(v),clearInterval(y),H&&(H.textContent=`Your final score is : ${d}`);const e=document.querySelector(".stats");e&&(e.style.display="flex"),S=!1,h&&(h.disabled=!0),c&&(c.disabled=!0),g&&(g.disabled=!1),o&&o.forEach(r=>r.classList.remove("mole")),V()}}const B="theme-preference",ae=()=>{E.value=E.value==="light"?"dark":"light",F()},se=()=>localStorage.getItem(B)?localStorage.getItem(B):window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",F=()=>{localStorage.setItem(B,E.value),R()},R=()=>{document.firstElementChild.setAttribute("data-theme",E.value),document.querySelector("#theme-toggle")?.setAttribute("aria-label",E.value)},E={value:se()};R();window.onload=()=>{R(),document.querySelector("#theme-toggle").addEventListener("click",ae)};window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:e})=>{E.value=e?"dark":"light",F()});function ce(){T.forEach(e=>{e.addEventListener("click",()=>{S||(T.forEach(r=>r.classList.remove("active")),e.classList.add("active"),u=e.dataset.level,A&&(A.textContent=u.charAt(0).toUpperCase()+u.slice(1)),$(),N())})}),document.addEventListener("keydown",e=>{const r=document.activeElement.tagName;if(r==="INPUT"||r==="TEXTAREA")return;if(/^[1-9]$/.test(e.key)){const s=parseInt(e.key,10)-1;p(s),P(s),e.preventDefault();return}const n=3;l===null&&p(4);let a=Math.floor(l/n),i=l%n;switch(e.key){case"ArrowLeft":i=Math.max(0,i-1),p(a*n+i),e.preventDefault();break;case"ArrowRight":i=Math.min(n-1,i+1),p(a*n+i),e.preventDefault();break;case"ArrowUp":a=Math.max(0,a-1),p(a*n+i),e.preventDefault();break;case"ArrowDown":a=Math.min(2,a+1),p(a*n+i),e.preventDefault();break;case"Enter":case" ":P(l),e.preventDefault();break}}),h&&h.addEventListener("click",re),c&&c.addEventListener("click",ne),g&&g.addEventListener("click",$),G&&G.addEventListener("click",ee)}function le(){W(),Z(),U(),$(),N(),ce(),oe()}document.addEventListener("DOMContentLoaded",()=>{le()});
