(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const D of s.addedNodes)D.tagName==="LINK"&&D.rel==="modulepreload"&&a(D)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}})();const G={easy:{gameTime:30,initialSpeed:1e3,fastSpeed:800,speedChangeTime:15,pointsPerHit:1,timeBonus:!1},medium:{gameTime:45,initialSpeed:700,fastSpeed:500,speedChangeTime:25,pointsPerHit:2,timeBonus:!0},hard:{gameTime:60,initialSpeed:500,fastSpeed:300,speedChangeTime:40,pointsPerHit:3,timeBonus:!0}};let w=-1;function z(e,t="easy",r=0){const a=G[t];let n=a.pointsPerHit;return a.timeBonus&&r<10&&(n+=1),e+n}function _(e,t=!0){let r;if(t&&w!==-1)do r=Math.floor(Math.random()*e);while(r===w);else r=Math.floor(Math.random()*e);return w=r,r}function P(){w=-1}function F(e="easy"){return G[e].gameTime}function K(e,t="easy"){const r=G[t];return e>=r.speedChangeTime?r.initialSpeed:r.fastSpeed}function X(e,t="easy"){return e===G[t].speedChangeTime}let o,T,v,I,b,u,i,d,M,C,x,H;function Y(){o=document.querySelectorAll(".square"),document.querySelector(".mole"),T=document.querySelector("#time-left"),v=document.querySelector("#score"),I=document.querySelector("#high-score"),b=document.querySelector("#final-score"),u=document.querySelector("#start-button"),i=document.querySelector("#pause-button"),d=document.querySelector("#restart-button"),M=document.querySelector("#reset-highscore-button"),C=document.querySelector("#high-score-message"),x=document.querySelectorAll(".difficulty-btn"),H=document.querySelector("#current-difficulty")}let $,m=0,L=0,f=30,p=null,E=null,S=!1,g=!1,c="easy",l=null;function j(){$=new Audio("audio/whack01.mp3")}function J(){return parseInt(localStorage.getItem(`whackAMoleHighScore_${c}`))||0}function Q(e){localStorage.setItem(`whackAMoleHighScore_${c}`,e),I&&(I.textContent=e)}function q(){log("updateHighScoreDisplay called");try{if(I){const e=J(c);I.textContent=e,log(`High score displayed: ${e}`)}else log("Error: highScore element not found")}catch(e){log(`Error in updateHighScoreDisplay: ${e.message}`)}}function O(){log("resetHighScore called");try{confirm(`Reset ${c.toUpperCase()} High Score?`)&&(log(`Resetting high score for ${c}`),Q(0),C&&(C.textContent="High Score Reset!",C.style.display="block",setTimeout(()=>C.style.display="none",2e3)))}catch(e){log(`Error in resetHighScore: ${e.message}`)}}function y(e=!1){log("resetGame called");try{p&&clearInterval(p),E&&clearInterval(E),m=0,v&&(v.textContent=m),b&&(b.textContent=""),o&&o.forEach(t=>t.classList.remove("mole")),P(),S=!1,g=!1,u&&(u.disabled=!1),i&&(i.disabled=!0,i.textContent="Pause"),d&&(d.disabled=!0),e||(f=F(c),log(`getInitialTime in resetGame returned: ${f}`)),updateTimerUI(),q(),log(`Game reset. Difficulty: ${c}, time: ${f}`)}catch(t){log(`Error in resetGame: ${t.message}`)}}function R(){log("startGame called");try{if(g){log("Game already running, ignoring startGame");return}y(!0),g=!0,u&&(u.disabled=!0),i&&(i.disabled=!1),d&&(d.disabled=!1),log("Starting moveMole"),B(),log("Starting countDown timer"),E=setInterval(U,1e3),log("Game started successfully")}catch(e){log(`Error in startGame: ${e.message}`)}}function N(){log("pauseGame called");try{if(!g){log("Game not running, ignoring pauseGame");return}S?(B(),E=setInterval(U,1e3),i&&(i.textContent="Pause"),S=!1,log("Game resumed")):(clearInterval(p),clearInterval(E),i&&(i.textContent="Resume"),S=!0,log("Game paused"))}catch(e){log(`Error in pauseGame: ${e.message}`)}}function W(){if(!o)return;o.forEach(r=>{r.classList.remove("mole")}),o.forEach(r=>r.classList.remove("selected")),L=null,l=null;const e=_(9,!0),t=o[e];t.classList.add("mole"),L=t.id}function A(e){if(!g||S)return;const t=o[e];t&&t.id==L&&(m++,v.textContent=m,L=null)}function Z(){if(o)try{o.forEach((e,t)=>{e.addEventListener("mousedown",()=>{A(t),h(t),e.id==L&&g&&!S&&(m=z(m,c,f),v&&(v.textContent=m),L=null,$.currentTime=0,$.play().catch(r=>{console.log("Audio play prevented:",r)}))})})}catch(e){log(`Error in addSquareListeners: ${e.message}`)}}function h(e){l!==null&&o[l]&&o[l].classList.remove("selected"),l=e,o[l]&&(o[l].classList.add("selected"),o[l].focus({preventScroll:!0}),srAnnouncer&&(srAnnouncer.textContent=`Selected Hole ${l+1}`))}function B(){log("moveMole called");try{p&&clearInterval(p);const e=K(f,c);log(`Setting mole timer with speed: ${e}`),p=setInterval(W,e)}catch(e){log(`Error in moveMole: ${e.message}`)}}function U(){if(f--,T&&(T.textContent=f),X(f,c)&&B(),f==0){clearInterval(E),clearInterval(p),b&&(b.textContent=`Your final score is : ${m}`);const e=document.querySelector(".stats");e&&(e.style.display="flex"),g=!1,u&&(u.disabled=!0),i&&(i.disabled=!0),d&&(d.disabled=!1),o&&o.forEach(t=>t.classList.remove("mole"))}}function V(){x&&(x.forEach(e=>{e.addEventListener("click",()=>{g||(x.forEach(t=>t.classList.remove("active")),e.classList.add("active"),c=e.dataset.level,H&&(H.textContent=c.charAt(0).toUpperCase()+c.slice(1)),y(),q())})}),document.addEventListener("keydown",e=>{const t=document.activeElement.tagName;if(t==="INPUT"||t==="TEXTAREA")return;if(/^[1-9]$/.test(e.key)){const s=parseInt(e.key,10)-1;h(s),A(s),e.preventDefault();return}const r=3;l===null&&h(4);let a=Math.floor(l/r),n=l%r;switch(e.key){case"ArrowLeft":n=Math.max(0,n-1),h(a*r+n),e.preventDefault();break;case"ArrowRight":n=Math.min(r-1,n+1),h(a*r+n),e.preventDefault();break;case"ArrowUp":a=Math.max(0,a-1),h(a*r+n),e.preventDefault();break;case"ArrowDown":a=Math.min(2,a+1),h(a*r+n),e.preventDefault();break;case"Enter":case" ":A(l),e.preventDefault();break}}),u.addEventListener("click",R),i.addEventListener("click",N),d.addEventListener("click",y),M.addEventListener("click",O),P(),y(),q(),u&&u.addEventListener("click",R),i&&i.addEventListener("click",N),d&&d.addEventListener("click",y),M&&M.addEventListener("click",O))}function ee(){Y(),j(),P(),y(),q(),V(),Z()}document.addEventListener("DOMContentLoaded",()=>{ee()});const k=document.getElementById("theme-toggle"),te=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;(localStorage.getItem("theme")==="dark"||!localStorage.getItem("theme")&&te)&&(document.body.classList.add("dark"),k&&(k.textContent="‚òÄÔ∏è"));k&&k.addEventListener("click",()=>{document.body.classList.toggle("dark");const e=document.body.classList.contains("dark");localStorage.setItem("theme",e?"dark":"light"),k.textContent=e?"‚òÄÔ∏è":"üåô"});
