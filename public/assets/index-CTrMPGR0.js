(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const M of a.addedNodes)M.tagName==="LINK"&&M.rel==="modulepreload"&&s(M)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();const G={easy:{gameTime:30,initialSpeed:1e3,fastSpeed:800,speedChangeTime:15,pointsPerHit:1,timeBonus:!1},medium:{gameTime:45,initialSpeed:700,fastSpeed:500,speedChangeTime:25,pointsPerHit:2,timeBonus:!0},hard:{gameTime:60,initialSpeed:500,fastSpeed:300,speedChangeTime:40,pointsPerHit:3,timeBonus:!0}};let w=-1;function z(e,r="easy",n=0){const s=G[r];let i=s.pointsPerHit;return s.timeBonus&&n<10&&(i+=1),e+i}function _(e,r=!0){let n;if(r&&w!==-1)do n=Math.floor(Math.random()*e);while(n===w);else n=Math.floor(Math.random()*e);return w=n,n}function N(){w=-1}function F(e="easy"){return G[e].gameTime}function K(e,r="easy"){const n=G[r];return e>=n.speedChangeTime?n.initialSpeed:n.fastSpeed}function X(e,r="easy"){return e===G[r].speedChangeTime}let o,L,C,H,q,h,c,g,T,m,$,D,k;function Y(){o=document.querySelectorAll(".square"),document.querySelector(".mole"),L=document.querySelector("#time-left"),C=document.querySelector("#score"),H=document.querySelector("#high-score"),q=document.querySelector("#final-score"),h=document.querySelector("#start-button"),c=document.querySelector("#pause-button"),g=document.querySelector("#restart-button"),T=document.querySelector("#reset-highscore-button"),m=document.querySelector("#high-score-message"),$=document.querySelectorAll(".difficulty-btn"),D=document.querySelector("#current-difficulty"),k=document.querySelector("#sr-announcer")}let b,d=0,I=0,f=30,S=null,E=null,v=!1,p=!1,u="easy",l=null;function t(e){console.log(e)}function j(){b=new Audio("audio/whack01.mp3")}function O(){return parseInt(localStorage.getItem(`whackAMoleHighScore_${u}`))||0}function R(e){localStorage.setItem(`whackAMoleHighScore_${u}`,e),H&&(H.textContent=e)}function P(){t("updateHighScoreDisplay called");try{if(H){const e=O(u);H.textContent=e,t(`High score displayed: ${e}`)}else t("Error: highScore element not found")}catch(e){t(`Error in updateHighScoreDisplay: ${e.message}`)}}function J(){t("checkHighScore called");try{const e=O();d>e?(t(`New High Score! Old: ${e}, New: ${d}`),R(d),m&&(m.textContent="ðŸŽ‰ New High Score! ðŸŽ‰",m.style.display="block",setTimeout(()=>m.style.display="none",3e3))):t(`No new high score. Current score: ${d}, High Score: ${e}`)}catch(e){t(`Error in checkHighScore: ${e.message}`)}}function Q(){t("resetHighScore called");try{confirm(`Reset ${u.toUpperCase()} High Score?`)&&(t(`Resetting high score for ${u}`),R(0),m&&(m.textContent="High Score Reset!",m.style.display="block",setTimeout(()=>m.style.display="none",2e3)))}catch(e){t(`Error in resetHighScore: ${e.message}`)}}function W(){L&&(L.textContent=f)}function x(e=!1){t("resetGame called");try{S&&clearInterval(S),E&&clearInterval(E),d=0,C&&(C.textContent=d),q&&(q.textContent=""),o&&o.forEach(r=>r.classList.remove("mole")),N(),v=!1,p=!1,h&&(h.disabled=!1),c&&(c.disabled=!0,c.textContent="Pause"),g&&(g.disabled=!0),e||(f=F(u),t(`getInitialTime in resetGame returned: ${f}`)),W(),P(),t(`Game reset. Difficulty: ${u}, time: ${f}`)}catch(r){t(`Error in resetGame: ${r.message}`)}}function Z(){t("startGame called");try{if(p){t("Game already running, ignoring startGame");return}x(!0),p=!0,h&&(h.disabled=!0),c&&(c.disabled=!1),g&&(g.disabled=!1),t("Starting moveMole"),B(),t("Starting countDown timer"),E=setInterval(U,1e3),t("Game started successfully")}catch(e){t(`Error in startGame: ${e.message}`)}}function V(){t("pauseGame called");try{if(!p){t("Game not running, ignoring pauseGame");return}v?(B(),E=setInterval(U,1e3),c&&(c.textContent="Pause"),v=!1,t("Game resumed")):(clearInterval(S),clearInterval(E),c&&(c.textContent="Resume"),v=!0,t("Game paused"))}catch(e){t(`Error in pauseGame: ${e.message}`)}}function ee(){t("randomSquare called");try{if(!p||v)return;if(!o){t("Error: squares not initialized");return}o.forEach(n=>{n.classList.remove("mole")}),o.forEach(n=>n.classList.remove("selected")),I=null,l=null;const e=_(9,!0),r=o[e];r.classList.add("mole"),I=r.id}catch(e){t(`Error in randomSquare: ${e.message}`)}}function A(e){if(!p||v)return;const r=o[e];r&&r.id===I&&(d=z(d,u,f),C&&(C.textContent=d),I=null,b&&(b.currentTime=0,b.play().catch(n=>{console.log("Audio play prevented:",n)})))}function te(){o&&o.forEach((e,r)=>{e.addEventListener("mousedown",()=>{A(r),y(r)})})}function y(e){l!==null&&o[l]&&o[l].classList.remove("selected"),l=e,o[l]&&(o[l].classList.add("selected"),o[l].focus({preventScroll:!0}),k&&(k.textContent=`Selected Hole ${l+1}`))}function B(){t("moveMole called");try{S&&clearInterval(S);const e=K(f,u);t(`Setting mole timer with speed: ${e}`),S=setInterval(ee,e)}catch(e){t(`Error in moveMole: ${e.message}`)}}function U(){if(f--,L&&(L.textContent=f),X(f,u)&&B(),f==0){clearInterval(E),clearInterval(S),q&&(q.textContent=`Your final score is : ${d}`);const e=document.querySelector(".stats");e&&(e.style.display="flex"),p=!1,h&&(h.disabled=!0),c&&(c.disabled=!0),g&&(g.disabled=!1),o&&o.forEach(r=>r.classList.remove("mole")),J()}}function re(){$&&$.forEach(e=>{e.addEventListener("click",()=>{p||($.forEach(r=>r.classList.remove("active")),e.classList.add("active"),u=e.dataset.level,D&&(D.textContent=u.charAt(0).toUpperCase()+u.slice(1)),x(),P())})}),document.addEventListener("keydown",e=>{const r=document.activeElement.tagName;if(r==="INPUT"||r==="TEXTAREA")return;if(/^[1-9]$/.test(e.key)){const a=parseInt(e.key,10)-1;y(a),A(a),e.preventDefault();return}const n=3;l===null&&y(4);let s=Math.floor(l/n),i=l%n;switch(e.key){case"ArrowLeft":i=Math.max(0,i-1),y(s*n+i),e.preventDefault();break;case"ArrowRight":i=Math.min(n-1,i+1),y(s*n+i),e.preventDefault();break;case"ArrowUp":s=Math.max(0,s-1),y(s*n+i),e.preventDefault();break;case"ArrowDown":s=Math.min(2,s+1),y(s*n+i),e.preventDefault();break;case"Enter":case" ":A(l),e.preventDefault();break}}),h&&h.addEventListener("click",Z),c&&c.addEventListener("click",V),g&&g.addEventListener("click",x),T&&T.addEventListener("click",Q)}function ne(){Y(),j(),N(),x(),P(),re(),te()}document.addEventListener("DOMContentLoaded",()=>{ne()});
